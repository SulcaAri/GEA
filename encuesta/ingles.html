<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Formulario de EvaluaciÃ³n de InglÃ©s</title>
  <style>
    :root {
      --azul-principal: #002868;   /* Azul bandera */
      --rojo-principal: #bf0a30;   /* Rojo bandera */
      --blanco: #ffffff;
      --gris-oscuro: #333;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--azul-principal), var(--blanco), var(--rojo-principal));
      padding: 20px;
    }

    form {
      background: var(--blanco);
      padding: 40px;
      border-radius: 12px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      border-top: 10px solid var(--azul-principal);
      text-align: center;
    }

    h1 {
      color: var(--azul-principal);
      margin-bottom: 30px;
      font-weight: bold;
    }

    h2 {
      color: var(--rojo-principal);
      margin-bottom: 20px;
      font-weight: bold;
    }

    label {
      display: block;
      text-align: left;
      margin: 15px 0 5px;
      font-weight: bold;
      color: var(--gris-oscuro);
    }

    select, input, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    button, input[type="submit"] {
      background: var(--azul-principal);
      color: var(--blanco);
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 15px;
      transition: all 0.3s ease;
    }

    button:hover, input[type="submit"]:hover {
      background: var(--rojo-principal);
      transform: scale(1.05);
    }

    .hidden {
      display: none;
    }

    #resultado {
      margin-top: 25px;
      font-size: 18px;
      font-weight: bold;
      color: var(--azul-principal);
    }

    #final {
      display: none;
      margin-top: 20px;
    }

    #final button {
      background: var(--rojo-principal);
      color: var(--blanco);
      padding: 14px 25px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #final button:hover {
      background: #a00a25;
      transform: scale(1.05);
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <form id="formulario-evaluacion">
    <!-- Bandera -->
    <img src="https://cdn-icons-png.flaticon.com/512/197/197484.png"
         alt="Bandera de Estados Unidos"
         style="max-width:120px; display:block; margin:0 auto 15px;">

    <h1>Formulario de EvaluaciÃ³n de InglÃ©s</h1>

    <!-- PARTE 1 -->
    <div class="section" id="parte1">
      <h2>Parte 1: Datos personales</h2>

      <label>Â¿Hace cuÃ¡nto tiempo practicas el idioma?</label>
      <input type="text" name="tiempo_practica" required>

      <label>Â¿DÃ³nde lo has estudiado?</label>
      <input type="text" name="lugar_estudio" required>

      <label>Â¿En quÃ© nivel consideras que estÃ¡s?</label>
      <input type="text" name="nivel_autopercibido" required>

      <button type="button" onclick="mostrarParte2()">Siguiente</button>
    </div>

    <!-- PARTE 2 -->
    <div class="section hidden" id="parte2">
      <h2>Parte 2: Test de Nivel (20 preguntas)</h2>

      <div id="preguntas"></div>

      <input type="submit" value="Enviar formulario">
      <div id="resultado"></div>
      <div id="final"></div>
    </div>
  </form>

  <script>
    const preguntas = [
      {q:"Whatâ€™s the plural of 'child'?", a:"b", opciones:["Childs","Children","Childes"]},
      {q:"Choose the correct sentence:", a:"c", opciones:["She go to school.","She going to school.","She goes to school."]},
      {q:"Past tense of 'buy' is:", a:"a", opciones:["Bought","Buyed","Buy"]},
      {q:"'I ____ a book now.'", a:"b", opciones:["read","am reading","reads"]},
      {q:"Translate: 'La reuniÃ³n fue cancelada.'", a:"c", opciones:["The meeting has postponed.","The meeting is on Monday.","The meeting was cancelled."]},
      {q:"Synonym of 'happy'?", a:"a", opciones:["Glad","Sad","Angry"]},
      {q:"What is 'better'?", a:"c", opciones:["Adjective","Noun","Comparative"]},
      {q:"Complete: 'He ____ never late.'", a:"b", opciones:["are","is","be"]},
      {q:"Past of 'can'?", a:"a", opciones:["Could","Caned","Canned"]},
      {q:"Opposite of 'hot'?", a:"c", opciones:["Warm","Cool","Cold"]},
      {q:"Which one is correct?", a:"b", opciones:["There is many people.","There are many people.","There have many people."]},
      {q:"'Mouse' plural is:", a:"c", opciones:["Mouses","Mices","Mice"]},
      {q:"Future: 'I ____ travel tomorrow.'", a:"a", opciones:["will","am","can"]},
      {q:"Choose correct question:", a:"b", opciones:["Where you are going?","Where are you going?","Where going you?"]},
      {q:"Translate: 'Estoy estudiando inglÃ©s.'", a:"c", opciones:["I study English.","I studied English.","I am studying English."]},
      {q:"Antonym of 'fast'?", a:"b", opciones:["Speed","Slow","Quick"]},
      {q:"Select correct phrase:", a:"a", opciones:["She has got two sisters.","She have two sisters.","She haves two sisters."]},
      {q:"Past participle of 'eat'?", a:"b", opciones:["Eated","Eaten","Ate"]},
      {q:"Which is correct?", a:"c", opciones:["He donâ€™t like tea.","He doesnâ€™t likes tea.","He doesnâ€™t like tea."]},
      {q:"What does 'Can you spell that?' mean?", a:"a", opciones:["Â¿Puedes deletrear eso?","Â¿Puedes explicarme eso?","Â¿Puedes traducir eso?"]}
    ];

    // Generar preguntas SIN required
    const contenedor = document.getElementById("preguntas");
    preguntas.forEach((p, i) => {
      let html = `<label>${i+1}. ${p.q}</label>
                  <select name="p${i}">
                    <option value="">Selecciona</option>`;
      p.opciones.forEach((op, idx) => {
        let letra = String.fromCharCode(97+idx);
        html += `<option value="${letra}">${op}</option>`;
      });
      html += `</select>`;
      contenedor.innerHTML += html;
    });

    function mostrarParte2() {
      document.getElementById("parte1").classList.add("hidden");
      document.getElementById("parte2").classList.remove("hidden");
    }

    document.getElementById("formulario-evaluacion").addEventListener("submit", function(e){
    e.preventDefault(); // evita refrescar la pÃ¡gina

    let puntaje = 0;
    preguntas.forEach((p,i)=>{
      const resp = this[`p${i}`].value;
      if(resp === p.a) puntaje++;
    });

    let nivel = "";
    if(puntaje <=5) nivel="A1";
    else if(puntaje <=10) nivel="A2";
    else if(puntaje <=14) nivel="B1";
    else if(puntaje <=17) nivel="B2";
    else if(puntaje <=19) nivel="C1";
    else nivel="C2";

    // âœ… mostrar resultado correctamente
    const resultado = document.getElementById("resultado");
    resultado.style.display = "block";
    resultado.textContent = `âœ… Tu puntaje es ${puntaje}/20 â†’ Nivel estimado: ${nivel}`;

    // Guardamos nivel en localStorage
    localStorage.setItem("nivelIngles", nivel);

    // âœ… mostrar botÃ³n final
    const finalDiv = document.getElementById("final");
    finalDiv.style.display = "block";
    finalDiv.innerHTML = `<button onclick="window.location.href='youtuingles.html'">ðŸ“š Ir a clases de nivel ${nivel}</button>`;
  });
</script>

</body>
</html>
